{"version":3,"sources":["Dropdown/styles.module.css","WeatherInfoTable/styles.module.css","ErrorBoundary/ErrorBoundary.jsx","Loader/Loader.jsx","WeatherInfoTable/WeatherInfoTable.jsx","Dropdown/Dropdown.jsx","MyWeatherComponent.js","index.js","styles.module.css"],"names":["module","exports","ErrorBoundary","props","state","hasError","this","children","error","React","Component","Loader","className","WeatherInfoTable","data","value","css","infoTable","class","caption","toUpperCase","slice","container","title","dataItem","map","item","Dropdown","filterList","Filter","onSelect","selectedUnit","select","onChange","metric","standart","imperial","Object","keys","selected","values","baseUrl","MyWeatherComponent","getData","fetchData","appid","process","q","units","getDataDebounced","debounce","handleChange","e","setState","target","handleSelect","_","prevState","isLoading","isError","isFound","wrapper","input","MyWeatherComponentWithFetch","queryParams","a","searchParams","URLSearchParams","toString","url","fetch","then","resp","ok","json","status","Error","main","catch","finally","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e763e5ac.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"filterList\":\"styles_filterList__1NJDR\",\"select\":\"styles_select__3BRcI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"infoTable\":\"styles_infoTable__32QuS\",\"container\":\"styles_container__38V-Q\",\"item\":\"styles_item__1Ar8d\",\"caption\":\"styles_caption__3tPqP\"};","import React from \"react\";\r\n\r\nexport class ErrorBoundary extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      hasError: false,\r\n    };\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    return { hasError: true };\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return <div>Что-то пошло не так, но мы уже исправляем.</div>;\r\n    }\r\n    return <div>{this.props.children}</div>;\r\n  }\r\n}\r\n","import \"./styles.css\";\r\n\r\nexport const Loader = () => {\r\n  return (\r\n    <div className=\"lds-ellipsis\">\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n    </div>\r\n  );\r\n};\r\n","import css from \"./styles.module.css\";\r\n\r\nexport function WeatherInfoTable(props) {\r\n  const { data, value } = props;\r\n  const dataItems = [\r\n    { title: \"температура\", dataItem: \"temp\" },\r\n    { title: \"ощущается\", dataItem: \"feels_like\" },\r\n    { title: \"давление, гПа\", dataItem: \"pressure\" },\r\n    { title: \"влажность, %\", dataItem: \"humidity\" },\r\n  ];\r\n\r\n  if (!value) {\r\n    return <div>Введите название города</div>;\r\n  }\r\n  return (\r\n    <div className={css.infoTable}>\r\n      <div class={css.caption}>\r\n        Метеопоказания в городе {value[0].toUpperCase() + value.slice(1)}\r\n      </div>\r\n      <div className={css.container}>\r\n        {dataItems.map((item) => (\r\n          <div>\r\n            <div className={css.item} key={item.title}>\r\n              {item.title}\r\n            </div>\r\n            <div className={css.item} key={item.dataItem}>\r\n              {data[item.dataItem]}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport css from \"./styles.module.css\";\r\n\r\nexport const Dropdown = (props) => {\r\n  return (\r\n    <div>\r\n      <div className={css.filterList}>\r\n        <legend>единицы измерения температуры:</legend>\r\n      </div>\r\n      <div>\r\n        <Filter onSelect={props.onSelect} selectedUnit={props.selectedUnit} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nfunction Filter(props) {\r\n  const units = [\r\n    { metric: \"Celsius\" },\r\n    { standart: \"Kelvin\" },\r\n    { imperial: \"Fahrenheit\" },\r\n  ];\r\n  return (\r\n    <select className={css.select} onChange={props.onSelect}>\r\n      {units.map((item) => (\r\n        <option\r\n          key={Object.keys(item)}\r\n          value={Object.keys(item)}\r\n          selected={props.selectedUnit === Object.keys(item)}\r\n        >\r\n          {Object.values(item)}\r\n        </option>\r\n      ))}\r\n    </select>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport css from \"./styles.module.css\";\r\nimport { Loader } from \"./Loader\";\r\nimport { debounce } from \"lodash\";\r\nimport { WeatherInfoTable } from \"./WeatherInfoTable/WeatherInfoTable\";\r\nimport { Dropdown } from \"./Dropdown/Dropdown\";\r\n\r\nconst withFetch = (Component, baseUrl) => {\r\n  return class extends React.Component {\r\n    state = {\r\n      isLoading: false,\r\n      isError: false,\r\n      isFound: true,\r\n      data: [],\r\n    };\r\n\r\n    fetchData = async (queryParams) => {\r\n      const searchParams = new URLSearchParams(queryParams).toString();\r\n      const url = baseUrl + searchParams;\r\n      this.setState({\r\n        isLoading: true,\r\n      });\r\n\r\n      fetch(url)\r\n        .then((resp) => {\r\n          if (resp.ok) {\r\n            return resp.json();\r\n          } else if (resp.status === 400 || 404) {\r\n            this.setState({ isFound: false });\r\n          }\r\n          throw new Error(\"ошибка получения данных\");\r\n        })\r\n        .then((data) => {\r\n          this.setState({\r\n            data: data.main,\r\n            isFound: true,\r\n            isError: false,\r\n          });\r\n        })\r\n        .catch(() => {\r\n          this.setState({\r\n            isError: true,\r\n          });\r\n        })\r\n        .finally(() => {\r\n          this.setState({\r\n            isLoading: false,\r\n          });\r\n        });\r\n    };\r\n    render() {\r\n      return (\r\n        <Component fetchData={this.fetchData} {...this.state} {...this.props} />\r\n      );\r\n    }\r\n  };\r\n};\r\n\r\nclass MyWeatherComponent extends React.Component {\r\n  state = {\r\n    value: \"minsk\",\r\n    selectedUnit: \"metric\",\r\n  };\r\n\r\n  getData = () => {\r\n    const AppKey = process.env.REACT_APP_OPEN_WEATHER_TOKEN;\r\n    const { value, selectedUnit } = this.state;\r\n    const { fetchData } = this.props;\r\n    const queryParams = { appid: AppKey, q: value, units: selectedUnit };\r\n    fetchData(queryParams);\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.getData();\r\n  }\r\n\r\n  getDataDebounced = debounce(this.getData, 1500);\r\n\r\n  componentDidUpdate(_, prevState) {\r\n    if (this.state.value !== prevState.value) {\r\n      this.getDataDebounced();\r\n    } else if (this.state.selectedUnit !== prevState.selectedUnit) {\r\n      this.getData();\r\n    } else return;\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    this.setState({\r\n      value: e.target.value,\r\n    });\r\n  };\r\n\r\n  handleSelect = (e) => {\r\n    this.setState({\r\n      selectedUnit: e.target.value,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { value, selectedUnit } = this.state;\r\n    const { isLoading, isError, isFound, data } = this.props;\r\n    return (\r\n      <div className={css.wrapper}>\r\n        <div className={css.input}>\r\n          <label>\r\n            Введите название города:\r\n            <input\r\n              className={css.input}\r\n              value={value}\r\n              onChange={this.handleChange}\r\n            />\r\n          </label>\r\n        </div>\r\n        <Dropdown onSelect={this.handleSelect} selectedUnit={selectedUnit} />\r\n        {isLoading && <Loader />}\r\n        {isError &&\r\n          !isLoading &&\r\n          isFound &&\r\n          \"Произошла ошибка, попробуйте позже\"}\r\n        {isError &&\r\n          !isLoading &&\r\n          !isFound &&\r\n          \"Искомый город не найден - попробуйте изменить запрос\"}\r\n        {!isError && !isLoading && isFound && (\r\n          <WeatherInfoTable value={value} data={data} />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst baseUrl = `https://api.openweathermap.org/data/2.5/weather?`;\r\nexport const MyWeatherComponentWithFetch = withFetch(\r\n  MyWeatherComponent,\r\n  baseUrl\r\n);\r\n","import ReactDOM from \"react-dom\";\r\nimport { ErrorBoundary } from \"./ErrorBoundary/ErrorBoundary\";\r\nimport { MyWeatherComponentWithFetch } from \"./MyWeatherComponent\";\r\n\r\nReactDOM.render(\r\n  <ErrorBoundary>\r\n    <MyWeatherComponentWithFetch />\r\n  </ErrorBoundary>,\r\n  document.getElementById(\"root\")\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"styles_wrapper__1pMsI\",\"input\":\"styles_input__GZS1x\"};"],"sourceRoot":""}